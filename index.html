<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>一个懒惰的倔强</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="记录一些在人间的趣事">
<meta property="og:type" content="website">
<meta property="og:title" content="一个懒惰的倔强">
<meta property="og:url" content="https://hexo.zdu.us.kg/index.html">
<meta property="og:site_name" content="一个懒惰的倔强">
<meta property="og:description" content="记录一些在人间的趣事">
<meta property="og:locale">
<meta property="article:author" content="XiangYu Chen">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="一个懒惰的倔强" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">一个懒惰的倔强</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Suche"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Suche"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://hexo.zdu.us.kg"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-虚拟机多出口提供服务" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/01/09/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%A4%9A%E5%87%BA%E5%8F%A3%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1/" class="article-date">
  <time class="dt-published" datetime="2025-01-09T07:16:00.000Z" itemprop="datePublished">2025-01-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/01/09/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%A4%9A%E5%87%BA%E5%8F%A3%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1/">虚拟机多出口提供服务</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>我在本地硬件服务器VM HOST中通过qemu创建一个虚拟机，并且在虚拟机VM1中部署了一个openvpn服务，它的IP地址是10.89.103.14;<br>因为硬件服务器配置了两个出口，但是呢虚拟机VM1的默认路由是走的其中一条线路，当通过另一条线路的公网IP访问进来的流量就没法路由了。<br>我的环境是：<br>VM HOST: Linux<br>VM1: Linux<br>我的拓扑如下：<br><img src="data:image/png;base64,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6EEP+t3vfvfFL37xJS95SeByzjnn7LLLLvb2qquu2nHHHV/0ohf9y7/8y8UXXxxs1l133a9//et6+8QnPvHOd77zXVe87n//+7/73e8ONieccMLqq6/+yU9+MuT0OZH6IdznvgytbRJZTXEmuAKTA1SXUfbjH//4yU9+8j3veU9F9Oc+97kc3ZmgzNRZS1OdnaEFvn/6p38SuKc97Wl/+tOflJAUang222yz//3f/x0F+r3vfe/LX/7yy172soULF372s59V+re//a2ZxTp73HHHWeaFF1543/ve9wtf+ILeSnCf85znPP7xj0dnR8GS0y4BTXF6IrLWr86i7OEPf/h//dd/3XrrraeddprmNDfccEO7YCcuLWnW0khn7bM0aT1i4tZPf+J666233377aeIpnT3wwAOVftSjHvXKV75Sib333lvLBRLN3Xff/alPfeqll14qOf7oRz96/PHHP+xhD/vMZz6jFcyTTjrJ2lCqszqkyfJee+2lxPe///2//e1vKmFWdFbfSPSanjAldExACtu3tfVuouzmm2/+0Ic+pL8GfI011vj5z3/eMfxx1SV9uW+ksxrjXn2Wjuu55WuCedNNN0lGbT6rzGc961m/+c1vCmdJeS+66KKnP/3pGsijjz76oQ99qBRW67a1Ovva17523333DaXNkM7O1jgGwiQU0n2b5XQcZfKBb33rWxJ3TWx74g9axmnekkamScrdvO5Mlpq9/uQnP9FFLensFVdccdlll0kKtT6gxK9+9au//OUvVq/p7NZbb33KKafoK8mjH/1orcbuscceFTqr2et3v/vde9/73lreDY2fIZ1N8ozQQRLzS6CHk1kB6TjKtOin9Vkt683vWITa21+fnaGVWaPwwAc+8MMf/rDmp9JZzVXf9a53bbjhhprSKvHOd74zTGxNZ7fZZpu3ve1thx56qM56z3ve8+xnP7tUZ8N1MJkdeeSRAbcSs6KzCtekK6RxH0nPI4F+fgvpMsp+8IMfqDrNh+ZxFApVa/1N41LIrHhbP59NVe6Kyro5ZCv00hTdY2A1brLJJs973vMKtZvOPuMZzzj//PM129X3oJ/97GdvfOMbS3U2XAcrFKK3s6KzScv2o90kZ74IrFhUXzJftY+rt7Mo+8UvfiGRPffcc8e1ZF7y9dVQwti86nqdVVlaN2he4vxaHnLIIfe5z310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gB0EchJwHGLobFPHcewETRFgB4GcBByHGDrb1HEcO0FTBNhBICcBxyGGzjZ1HMdO0BQBdhDIScBxiKGzTR3HsRM0RYAdBHIScBxi6GxTx3HsBE0RYAeBnAQchxg629RxHDtBUwTYQSAnAcchhs42dRzHTtAUAXYQyEnAcYihs00dx7ETNEWAHQRyEnAcYuhsU8dx7E7oS9MAACAASURBVARNEWAHgZwEHIcYOtvUcRw7QVME2EEgJwHHIYbONnUcx07QFAF2EMhJwHGIobNNHcexEzRFgB0EchJwHGLobFPHcewETRFgB4GcBByHGDrb1HEcO0FTBNhBICcBxyGGzjZ1HMdO0BQBdhDIScBxiKGzTR3HsRM0RYAdBHIScBxi6GxTx3HsBE0RYAeBnAQchxg629RxHDtBUwTYQSAnAcchhs42dRw5gWM/aEoBOwhkI+A4xNDZBK9BZxNgYQqBdAJeQwydTfAFr06QgABTCOQk4DXE0NkEr/HqBAkIMIVATgJeQwydTfAar06QgABTCOQk4DXE0NkEr/HqBAkIMIVATgJeQwydTfAar06QgABTCOQk4DXE0NkEr/HqBAkIMIVATgJeQwydTfAar06QgABTCOQk4DXE0NkEr/HqBAkIMIVATgJeQwydTfAar06QgABTCOQk4DXE0NkEr/HqBAkIMIVATgJeQwydTfAar06QgABTCOQk4DXE0NkEr/HqBAkIMIVATgJeQwydTfAar06QgABTCOQk4DXE0NkEr/HqBAkIMIVATgJeQwydTfAar06QgABTCOQk4DXE0NkEr/HqBAkIMIVATgJeQwydTfAar06QgABTCOQk4DXE0NkEr/HqBAkIMIVATgJeQwydTfAar06QgABTCOQk4DXE0NkEr/HqBAkIMIVATgJeQwydTfAar06QgABTCOQk4DXE0NkEr/HqBAkIMIVATgJeQwydTfAar06QgABTCOQk4DXE0NkEr/HqBAkIMIVATgJeQwydTfAar06QgABTCOQk4DXE0NkEr/HqBAkIMIVATgJeQwydTfAar06QgABTCOQk4DXE0NkEr/HqBAkIMIVATgJeQwydTfCaJUuWJFhjCgEIJBLwGmLobIkjLLv6j+dccrn9O+a8n9q/g069wP6FnGCjREkpZEEAAmMIDC3EBq2zNtimnjsfe9ZWh39uldd8cOJ/Gx5w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eI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkEchLwGmLobILXeHWCBASYQiAnAa8hhs4meI1XJ0hAgCkE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6KzXke26X+hsLXF0thaRVwN01uvIdt0vdLaWODpbi8irATrrdWS77hc6W0scna1F5NUAnfU6sl33C52tJY7O1iLyaoDOeh3ZrvuFztYSR2drEXk1QGe9jmzX/UJna4mjs7WIvBqgs15Htut+obO1xNHZWkReDdBZryPbdb/Q2Vri6GwtIq8G6KzXke26X+hsLXF0thaRVwN01uvIdt0vdLaWODpbi8irATrrdWS77hc6W0scna1F5NUAnfU6sl33C52tJY7O1iLyaoDOeh3ZrvuFztYSR2drEXk1QGe9jmzX/UJna4mjs7WIvBqgs15Htut+obO1xNHZWkResv97rQAAIABJREFUDdBZryPbdb/Q2Vri6GwtIq8G6KzXke26X+hsLXF0thaRVwN01uvIdt0vdLaWODpbi8irATrrdWS77hc6W0scna1F5NUAnfU6sl33C52tJY7O1iLyaoDOeh3ZrvuFztYSR2drEXk1QGe9jmzX/UJna4mjs7WIvBqgs15Htut+obO1xNHZWkReDdBZryPbdb/Q2Vri6GwtIq8G6KzXke26X+hsLXF0thaRVwN01uvIdt0vdLaWODpbi8irATrrdWS77hc6W0scna1F5NUAnfU6sl33C52tJY7O1iLyaoDOeh3ZLvq1bNmyJUuWWE2xzip/6dKlXbRgpupAZ2dquNpsLDrbJs0BlrXlllsuWrRIams6K4V9wQtesNJKKykxQBrVXUZnq/k4PorOOh7cLromeZWqLliwQH/XW2+9hQsXKiGp7aLuWahDfEIzY53V5xAfRYGM+wQ6636Is3dws802k7bGLxQkQBcKffzY6orprHIWL14sXMGGhHsCDLb7Ic7eQU3ZbD5rUstktkBcn0OrrrqqZvobbLCB0jblZ/26QMn3W3TW9/h21Lt4SstktgBdQFZffXV9CJnC2qdRwYa3vgmgs77Ht6PehSktk9lS4vHnkOb+TGZLKTnORGcdD26nXTMpYTJbCj1MaZnMlvJxn4nOuh/ijjqoKa2u83RU2QxWY59DTGZncOhaaDI62wJEioBALYEwpa21xMAfAXTW35jSo54S0JSWldmejk3mZqGzmQFTPARuJ8Di9e0kBvf/rOqsXU/gLwQgAIG2COST/xnW2XxQKBkCEBgaAYl1vi5nLDpfo1VyVihZW07hEIBADwlklRR0tocjTpMg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" alt="Image"></p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>我的配置如下仅仅做下记录，也是研究了很久才搞定的，大致的原理是通过iptables在VM HOST进行匹配特定IP和端口的流量然后将流量设置特定的tos，然后流量会流进到虚拟机VM1，VM1再通过匹配不同tos的流量将其进行mark；因为这个mark是链路级别的，当数据到达应用程序进行处理后出去的流量也会带上mark，后面再将mark的流量设置不同的tos；至于为什么还要设置tos，我的理解是tos是跨主机的标记，mark是当前机器链路级别的标记。当然如果没有匹配到tos的流量还是会走到默认路由的。<br>因为虚拟机VM1出去的流量也设置了tos，所以流量包到达VM HOST的时候就会进行匹配策略路由，将标记不同的tos的流量选择不同的路由表进行路由，至此就能做到多出口的提供服务。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">内部机器VM1(如果里面的机器还是DNAT，还得在DNAT的目标主机里添加规则进行标记)：</span><br><span class="line">iptables -t mangle -A PREROUTING -m tos --tos 0x02 -j MARK --set-mark 2</span><br><span class="line">iptables -t mangle -A PREROUTING -m tos --tos 0x04 -j MARK --set-mark 4</span><br><span class="line">iptables -t mangle -A PREROUTING -j CONNMARK --save-mark</span><br><span class="line">iptables -t mangle -A OUTPUT -m mark ! --mark 0 -j RETURN</span><br><span class="line">iptables -t mangle -A OUTPUT -j CONNMARK --restore-mark</span><br><span class="line">iptables -t mangle -A OUTPUT -m mark --mark 2 -j TOS --set-tos 0x02</span><br><span class="line">iptables -t mangle -A OUTPUT -m mark --mark 4 -j TOS --set-tos 0x04</span><br><span class="line"></span><br><span class="line">外面机器VM HOST：</span><br><span class="line">iptables -t mangle -A PREROUTING -d 10.88.100.14 -p tcp --dport 9000 -j TOS --set-tos 0x02</span><br><span class="line">iptables -t mangle -A PREROUTING -d 192.168.100.14 -p tcp --dport 9000 -j TOS --set-tos 0x04</span><br><span class="line">iptables -t mangle -A PREROUTING -d 10.88.100.14 -p tcp --dport 6789 -j TOS --set-tos 0x02</span><br><span class="line">iptables -t mangle -A PREROUTING -d 192.168.100.14 -p tcp --dport 6789 -j TOS --set-tos 0x04</span><br><span class="line"></span><br><span class="line">ip rule add tos 0x02 table 10</span><br><span class="line">ip rule add tos 0x04 table 20</span><br><span class="line">ip route add default via 10.88.100.1 table 10</span><br><span class="line">ip route add 10.89.103.0/24 dev virbr0 proto kernel scope <span class="built_in">link</span> src 10.89.103.1 table 10</span><br><span class="line">ip route add default via 192.168.100.1 table 20</span><br><span class="line">ip route add 10.89.103.0/24 dev virbr0 proto kernel scope <span class="built_in">link</span> src 10.89.103.1 table 20</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hexo.zdu.us.kg/2025/01/09/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%A4%9A%E5%87%BA%E5%8F%A3%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1/" data-id="cm5ph90hn0000txsbgagja4f1" data-title="虚拟机多出口提供服务" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-cloudflare-workerd把玩-编译workerd（一）" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/01/07/cloudflare-workerd%E6%8A%8A%E7%8E%A9-%E7%BC%96%E8%AF%91workerd%EF%BC%88%E4%B8%80%EF%BC%89/" class="article-date">
  <time class="dt-published" datetime="2025-01-07T07:24:53.000Z" itemprop="datePublished">2025-01-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/01/07/cloudflare-workerd%E6%8A%8A%E7%8E%A9-%E7%BC%96%E8%AF%91workerd%EF%BC%88%E4%B8%80%EF%BC%89/">cloudflare workerd把玩-编译workerd（一）</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>最近迷上了cloudflare的workers和pages，这个东西能做不少事情主要是还有免费额度。当然现在的博客就是部署在cloudflare的pages上面的，还能写api服务、前端打包部署（通过Wrangler CLI这个工具）能做部署大多数框架生成的前端工程；这样就能前后端都部署在cloudflare workers中了；安装Wrangler CLI可以参考下面的命令，当然官方文件中也写得很清楚：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add --user wrangler</span><br></pre></td></tr></table></figure>

<p>我也是无意中发现的cloudflare他们开源了自己的workers引擎，具体是在哪里发现的也记不太清楚了；于是呼就研究了一番workerd。</p>
<h2 id="编译workerd"><a href="#编译workerd" class="headerlink" title="编译workerd"></a>编译workerd</h2><p>要研究这个项目肯定是少不了自己编译，参考官方的github给出的文档进行了编译，官方给出在linux下面编译环境如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Bazel</span><br><span class="line">If you use Bazelisk (recommended), it will automatically download and use the right version of Bazel for building workerd.</span><br><span class="line"></span><br><span class="line">On Linux:</span><br><span class="line">We use the clang/LLVM toolchain to build workerd and support version 16 and higher. Earlier versions of clang may still work, but are not officially supported.</span><br><span class="line"></span><br><span class="line">Clang 16+ (e.g. package clang-16 on Debian Bookworm). If clang is installed as clang-&lt;version&gt; please create a symlink to it in your PATH named clang, or use --action_env=CC=clang-&lt;version&gt; on bazel command lines to specify the compiler name.</span><br><span class="line"></span><br><span class="line">libc++ 16+ (e.g. packages libc++-16-dev and libc++abi-16-dev)</span><br><span class="line"></span><br><span class="line">LLD 16+ (e.g. package lld-16).</span><br><span class="line"></span><br><span class="line">python3, python3-distutils, and tcl8.6</span><br><span class="line"></span><br><span class="line">You may then build workerd at the command-line with:</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bazel build //src/workerd/server:workerd</span><br></pre></td></tr></table></figure>

<p>我准备的系统和官方推荐的一致：<br>1.系统：Debian Bookworm<br>2.编译器：Clang 16<br>3.其他依赖的组件有clang-16,libc++-16-dev,libc++abi-16-dev,lld-16,python3,python3-distutils,tcl8.6<br>这里需要注意我使用的lxc创建的debian bookworm, 官方的这个文档中在我准备的这个系统中缺少了一些组件和一些配置：<br>1.因为我是使用官方推荐的Bazelisk,官方给的编译命令是Bazel build …，因为Bazelisk自动安装的Bazel在系统环境变量中找不到，所以应到替换成Bazelisk build …；这样就会自动下载特定版本的Bazel并运行了。<br>2.因为使用lxc创建的debian，如果直接安装好官方所需的组件后直接编译会提示缺少git；故最好在编译前安装好git。<br>3.到后边编译的时候会提示tclsh命令找不到，这是因为tclsh8.6没有生成软连接；最好在编译前手动生成一下。<br>3.后面生成带调试信息的workerd运行结束的时候会提示找不到llvm-symbolizer；同理手动生成一下llvm-symbolizer-16的软连接到llvm-symbolizer。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  helloworld git:(main) ../../bazel-bin/src/workerd/server/workerd serve config.capnp           </span><br><span class="line">^Ckj/exception.c++:357: warning: llvm-symbolizer was not found. To symbolize stack traces, install it in your $PATH or set $LLVM_SYMBOLIZER to the location of the binary. When running tests under bazel, use `--test_env=LLVM_SYMBOLIZER=&lt;path&gt;`.</span><br><span class="line">*** Received signal #2: Interrupt</span><br><span class="line">stack: /lib/x86_64-linux-gnu/libc.so.6@108c1d ../../bazel-bin/src/workerd/server/workerd@a82418a ../../bazel-bin/src/workerd/server/workerd@a77784d ../../bazel-bin/src/workerd/server/workerd@a778ee8 ../../bazel-bin/src/workerd/server/workerd@3e9458e ../../bazel-bin/src/workerd/server/workerd@3ea9112 ../../bazel-bin/src/workerd/server/workerd@3ea8bac ../../bazel-bin/src/workerd/server/workerd@3ea8b88 ../../bazel-bin/src/workerd/server/workerd@3ea8b5e ../../bazel-bin/src/workerd/server/workerd@3ea8ab3 ../../bazel-bin/src/workerd/server/workerd@3ea8a83 ../../bazel-bin/src/workerd/server/workerd@a86356f ../../bazel-bin/src/workerd/server/workerd@a862035 ../../bazel-bin/src/workerd/server/workerd@a86a690 ../../bazel-bin/src/workerd/server/workerd@a863c51 ../../bazel-bin/src/workerd/server/workerd@a860f86 ../../bazel-bin/src/workerd/server/workerd@a86a690 ../../bazel-bin/src/workerd/server/workerd@a863c51 ../../bazel-bin/src/workerd/server/workerd@a86742b ../../bazel-bin/src/workerd/server/workerd@a85d52c ../../bazel-bin/src/workerd/server/workerd@a85d31a ../../bazel-bin/src/workerd/server/workerd@3e63189 /lib/x86_64-linux-gnu/libc.so.6@27249 /lib/x86_64-linux-gnu/libc.so.6@27304 ../../bazel-bin/src/workerd/server/workerd@3e63020</span><br></pre></td></tr></table></figure>

<p>编译workerd会下载很多的依赖的第三方库，很多东西都是在墙外需要自行准备好梯子。</p>
<h2 id="编译带调试信息的workerd"><a href="#编译带调试信息的workerd" class="headerlink" title="编译带调试信息的workerd"></a>编译带调试信息的workerd</h2><p>要研究workerd，不可避免的需要调试它；因为workerd是使用Bazel编译的，通过查找官方文档得知只需要在build后面加上-c dbg参数就能生成带调试信息的workerd了，如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bazelisk build -c dbg //src/workerd/server:workerd</span><br></pre></td></tr></table></figure>

<p>这样生成的workerd相当的庞大，我这边生成后文件大小来到了1.3G。生成后的文件在：bazel-bin&#x2F;src&#x2F;workerd&#x2F;server&#x2F;workerd</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  helloworld git:(main) <span class="built_in">ls</span> -alh ../../bazel-bin/src/workerd/server/workerd</span><br><span class="line">-r-xr-xr-x 1 root root 1.3G Jan  6 16:47 ../../bazel-bin/src/workerd/server/workerd</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hexo.zdu.us.kg/2025/01/07/cloudflare-workerd%E6%8A%8A%E7%8E%A9-%E7%BC%96%E8%AF%91workerd%EF%BC%88%E4%B8%80%EF%BC%89/" data-id="cm5mnh6xq00008msb7vy2bza3" data-title="cloudflare workerd把玩-编译workerd（一）" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-freerdp连接远程主机互相复制粘贴文件的操作" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/01/07/freerdp%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA%E4%BA%92%E7%9B%B8%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E6%96%87%E4%BB%B6%E7%9A%84%E6%93%8D%E4%BD%9C/" class="article-date">
  <time class="dt-published" datetime="2025-01-07T03:08:02.000Z" itemprop="datePublished">2025-01-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/01/07/freerdp%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA%E4%BA%92%E7%9B%B8%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E6%96%87%E4%BB%B6%E7%9A%84%E6%93%8D%E4%BD%9C/">freerdp连接远程主机互相复制粘贴文件的操作</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="远程主机复制文件到本地linux主机"><a href="#远程主机复制文件到本地linux主机" class="headerlink" title="远程主机复制文件到本地linux主机"></a>远程主机复制文件到本地linux主机</h2><p>如果在远程主机中复制文件粘贴到本地linux系统中，那么剪切板中的数据类型是下面三种类型的数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">text/uri-list</span><br><span class="line">x-special/gnome-copied-files</span><br><span class="line">x-special/mate-copied-files</span><br></pre></td></tr></table></figure>

<p>注意在使用了wl-paste命令后，会将剪切板中的文件内容保存在命令执行后的路径中；如果不执行wl-paste命令是不会生成这个文件的，类似如下的路径：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file:///tmp/com.freerdp.client.cliprdr.2180867/20/region_2024_3_18 11_13_48.csv</span><br></pre></td></tr></table></figure>

<p>其中&#x2F;2180867&#x2F;20是随机生成的。</p>
<h2 id="本地linux主机复制文件到远程主机中"><a href="#本地linux主机复制文件到远程主机中" class="headerlink" title="本地linux主机复制文件到远程主机中"></a>本地linux主机复制文件到远程主机中</h2><p>本地linux主机复制文件到远程windows主机中当然也需要满足特定的格式，<br>1.需要获取到文件的绝对路径（没有测试过文件夹是否能够正常复制到远程主机中）<br>2.复制的数据要将类型设置成text&#x2F;uri-list,我的桌面环境sway；如果是gnome或者别的桌面环境可能要使用不同的类型，这些可以自行测试。<br>以下是我生成文件绝对路径到剪切板的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">readlink</span> -f &lt;PATH_FILE&gt; | sed <span class="string">&#x27;s|^|file://|&#x27;</span> |wl-copy -t text/uri-list</span><br></pre></td></tr></table></figure>

<p>生成了以后就能直接在远程windows主机中粘贴文件了。为了方便我将这一长串命令封装成了一个函数这样就能简单的调用复制了，我的写法如下(在.bashrc文件中定义函数实现的)：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">rdpcp</span></span>() &#123;</span><br><span class="line"> <span class="built_in">readlink</span> -f <span class="variable">$1</span> | sed <span class="string">&#x27;s|^|file://|&#x27;</span> |wl-copy -t text/uri-list</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将上面的内容添加到.bashrc；使用source .bashrc生效刚刚的配置；然后就能直接在终端中使用这个函数了如下格式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rdpcp &lt;PATH_FILE&gt;</span><br></pre></td></tr></table></figure>

<p>&lt;PATH_FILE&gt;可以是相对路径<br>注意这个复制仅仅适用于在终端中使用，如果有文件管理器就无需这些步骤了。直接在文件管理器中复制就能正常工作。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hexo.zdu.us.kg/2025/01/07/freerdp%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA%E4%BA%92%E7%9B%B8%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E6%96%87%E4%BB%B6%E7%9A%84%E6%93%8D%E4%BD%9C/" data-id="cm5me1r7m0000qosb5t9m8yc0" data-title="freerdp连接远程主机互相复制粘贴文件的操作" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Python-ctypes调用openssl动态C库的一些例子" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/18/Python-ctypes%E8%B0%83%E7%94%A8openssl%E5%8A%A8%E6%80%81C%E5%BA%93%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BE%8B%E5%AD%90/" class="article-date">
  <time class="dt-published" datetime="2024-12-18T02:26:46.000Z" itemprop="datePublished">2024-12-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/18/Python-ctypes%E8%B0%83%E7%94%A8openssl%E5%8A%A8%E6%80%81C%E5%BA%93%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BE%8B%E5%AD%90/">Python ctypes调用openssl动态C库的一些例子</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="AES-256-GCM加解密相关"><a href="#AES-256-GCM加解密相关" class="headerlink" title="AES 256 GCM加解密相关"></a>AES 256 GCM加解密相关</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Copyright 2012-2019 The OpenSSL Project Authors. All Rights Reserved.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use</span></span><br><span class="line"><span class="comment"> * this file except in compliance with the License.  You can obtain a copy</span></span><br><span class="line"><span class="comment"> * in the file LICENSE in the source distribution or at</span></span><br><span class="line"><span class="comment"> * https://www.openssl.org/source/license.html</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Simple AES GCM test program, uses the same NIST data used for the FIPS</span></span><br><span class="line"><span class="comment"> * self test but uses the application level EVP APIs.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;openssl/bio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;openssl/evp.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* AES-GCM test data from NIST public test vectors */</span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> gcm_key[] = &#123;</span><br><span class="line">    <span class="number">0xee</span>, <span class="number">0xbc</span>, <span class="number">0x1f</span>, <span class="number">0x57</span>, <span class="number">0x48</span>, <span class="number">0x7f</span>, <span class="number">0x51</span>, <span class="number">0x92</span>, <span class="number">0x1c</span>, <span class="number">0x04</span>, <span class="number">0x65</span>, <span class="number">0x66</span>,</span><br><span class="line">    <span class="number">0x5f</span>, <span class="number">0x8a</span>, <span class="number">0xe6</span>, <span class="number">0xd1</span>, <span class="number">0x65</span>, <span class="number">0x8b</span>, <span class="number">0xb2</span>, <span class="number">0x6d</span>, <span class="number">0xe6</span>, <span class="number">0xf8</span>, <span class="number">0xa0</span>, <span class="number">0x69</span>,</span><br><span class="line">    <span class="number">0xa3</span>, <span class="number">0x52</span>, <span class="number">0x02</span>, <span class="number">0x93</span>, <span class="number">0xa5</span>, <span class="number">0x72</span>, <span class="number">0x07</span>, <span class="number">0x8f</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> gcm_iv[] = &#123;</span><br><span class="line">    <span class="number">0x99</span>, <span class="number">0xaa</span>, <span class="number">0x3e</span>, <span class="number">0x68</span>, <span class="number">0xed</span>, <span class="number">0x81</span>, <span class="number">0x73</span>, <span class="number">0xa0</span>, <span class="number">0xee</span>, <span class="number">0xd0</span>, <span class="number">0x66</span>, <span class="number">0x84</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> gcm_pt[] = &#123;</span><br><span class="line">    <span class="number">0xf5</span>, <span class="number">0x6e</span>, <span class="number">0x87</span>, <span class="number">0x05</span>, <span class="number">0x5b</span>, <span class="number">0xc3</span>, <span class="number">0x2d</span>, <span class="number">0x0e</span>, <span class="number">0xeb</span>, <span class="number">0x31</span>, <span class="number">0xb2</span>, <span class="number">0xea</span>,</span><br><span class="line">    <span class="number">0xcc</span>, <span class="number">0x2b</span>, <span class="number">0xf2</span>, <span class="number">0xa5</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> gcm_aad[] = &#123;</span><br><span class="line">    <span class="number">0x4d</span>, <span class="number">0x23</span>, <span class="number">0xc3</span>, <span class="number">0xce</span>, <span class="number">0xc3</span>, <span class="number">0x34</span>, <span class="number">0xb4</span>, <span class="number">0x9b</span>, <span class="number">0xdb</span>, <span class="number">0x37</span>, <span class="number">0x0c</span>, <span class="number">0x43</span>,</span><br><span class="line">    <span class="number">0x7f</span>, <span class="number">0xec</span>, <span class="number">0x78</span>, <span class="number">0xde</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> gcm_ct[] = &#123;</span><br><span class="line">    <span class="number">0xf7</span>, <span class="number">0x26</span>, <span class="number">0x44</span>, <span class="number">0x13</span>, <span class="number">0xa8</span>, <span class="number">0x4c</span>, <span class="number">0x0e</span>, <span class="number">0x7c</span>, <span class="number">0xd5</span>, <span class="number">0x36</span>, <span class="number">0x86</span>, <span class="number">0x7e</span>,</span><br><span class="line">    <span class="number">0xb9</span>, <span class="number">0xf2</span>, <span class="number">0x17</span>, <span class="number">0x36</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> gcm_tag[] = &#123;</span><br><span class="line">    <span class="number">0x67</span>, <span class="number">0xba</span>, <span class="number">0x05</span>, <span class="number">0x10</span>, <span class="number">0x26</span>, <span class="number">0x2a</span>, <span class="number">0xe4</span>, <span class="number">0x87</span>, <span class="number">0xd7</span>, <span class="number">0x37</span>, <span class="number">0xee</span>, <span class="number">0x62</span>,</span><br><span class="line">    <span class="number">0x98</span>, <span class="number">0xf7</span>, <span class="number">0x7e</span>, <span class="number">0x0c</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">aes_gcm_encrypt</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    EVP_CIPHER_CTX *ctx;</span><br><span class="line">    <span class="type">int</span> outlen, tmplen;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> outbuf[<span class="number">1024</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;AES GCM Encrypt:\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Plaintext:\n&quot;</span>);</span><br><span class="line">    BIO_dump_fp(<span class="built_in">stdout</span>, gcm_pt, <span class="keyword">sizeof</span>(gcm_pt));</span><br><span class="line">    ctx = EVP_CIPHER_CTX_new();</span><br><span class="line">    <span class="comment">/* Set cipher type and mode */</span></span><br><span class="line">    EVP_EncryptInit_ex(ctx, EVP_aes_256_gcm(), <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="comment">/* Set IV length if default 96 bits is not appropriate */</span></span><br><span class="line">    EVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_AEAD_SET_IVLEN, <span class="keyword">sizeof</span>(gcm_iv), <span class="literal">NULL</span>);</span><br><span class="line">    <span class="comment">/* Initialise key and IV */</span></span><br><span class="line">    EVP_EncryptInit_ex(ctx, <span class="literal">NULL</span>, <span class="literal">NULL</span>, gcm_key, gcm_iv);</span><br><span class="line">    <span class="comment">/* Zero or more calls to specify any AAD */</span></span><br><span class="line">    EVP_EncryptUpdate(ctx, <span class="literal">NULL</span>, &amp;outlen, gcm_aad, <span class="keyword">sizeof</span>(gcm_aad));</span><br><span class="line">    <span class="comment">/* Encrypt plaintext */</span></span><br><span class="line">    EVP_EncryptUpdate(ctx, outbuf, &amp;outlen, gcm_pt, <span class="keyword">sizeof</span>(gcm_pt));</span><br><span class="line">    <span class="comment">/* Output encrypted block */</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Ciphertext:\n&quot;</span>);</span><br><span class="line">    BIO_dump_fp(<span class="built_in">stdout</span>, outbuf, outlen);</span><br><span class="line">    <span class="comment">/* Finalise: note get no output for GCM */</span></span><br><span class="line">    EVP_EncryptFinal_ex(ctx, outbuf, &amp;outlen);</span><br><span class="line">    <span class="comment">/* Get tag */</span></span><br><span class="line">    EVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_AEAD_GET_TAG, <span class="number">16</span>, outbuf);</span><br><span class="line">    <span class="comment">/* Output tag */</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Tag:\n&quot;</span>);</span><br><span class="line">    BIO_dump_fp(<span class="built_in">stdout</span>, outbuf, <span class="number">16</span>);</span><br><span class="line">    EVP_CIPHER_CTX_free(ctx);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">aes_gcm_decrypt</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    EVP_CIPHER_CTX *ctx;</span><br><span class="line">    <span class="type">int</span> outlen, tmplen, rv;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> outbuf[<span class="number">1024</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;AES GCM Decrypt:\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Ciphertext:\n&quot;</span>);</span><br><span class="line">    BIO_dump_fp(<span class="built_in">stdout</span>, gcm_ct, <span class="keyword">sizeof</span>(gcm_ct));</span><br><span class="line">    ctx = EVP_CIPHER_CTX_new();</span><br><span class="line">    <span class="comment">/* Select cipher */</span></span><br><span class="line">    EVP_DecryptInit_ex(ctx, EVP_aes_256_gcm(), <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="comment">/* Set IV length, omit for 96 bits */</span></span><br><span class="line">    EVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_AEAD_SET_IVLEN, <span class="keyword">sizeof</span>(gcm_iv), <span class="literal">NULL</span>);</span><br><span class="line">    <span class="comment">/* Specify key and IV */</span></span><br><span class="line">    EVP_DecryptInit_ex(ctx, <span class="literal">NULL</span>, <span class="literal">NULL</span>, gcm_key, gcm_iv);</span><br><span class="line">    <span class="comment">/* Zero or more calls to specify any AAD */</span></span><br><span class="line">    EVP_DecryptUpdate(ctx, <span class="literal">NULL</span>, &amp;outlen, gcm_aad, <span class="keyword">sizeof</span>(gcm_aad));</span><br><span class="line">    <span class="comment">/* Decrypt plaintext */</span></span><br><span class="line">    EVP_DecryptUpdate(ctx, outbuf, &amp;outlen, gcm_ct, <span class="keyword">sizeof</span>(gcm_ct));</span><br><span class="line">    <span class="comment">/* Output decrypted block */</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Plaintext:\n&quot;</span>);</span><br><span class="line">    BIO_dump_fp(<span class="built_in">stdout</span>, outbuf, outlen);</span><br><span class="line">    <span class="comment">/* Set expected tag value. */</span></span><br><span class="line">    EVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_AEAD_SET_TAG, <span class="keyword">sizeof</span>(gcm_tag),</span><br><span class="line">                        (<span class="type">void</span> *)gcm_tag);</span><br><span class="line">    <span class="comment">/* Finalise: note get no output for GCM */</span></span><br><span class="line">    rv = EVP_DecryptFinal_ex(ctx, outbuf, &amp;outlen);</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * Print out return value. If this is not successful authentication</span></span><br><span class="line"><span class="comment">     * failed and plaintext is not trustworthy.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Tag Verify %s\n&quot;</span>, rv &gt; <span class="number">0</span> ? <span class="string">&quot;Successful!&quot;</span> : <span class="string">&quot;Failed!&quot;</span>);</span><br><span class="line">    EVP_CIPHER_CTX_free(ctx);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span><br><span class="line">&#123;</span><br><span class="line">    aes_gcm_encrypt();</span><br><span class="line">    aes_gcm_decrypt();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>参考：<a target="_blank" rel="noopener" href="https://github.com/openssl/openssl/blob/OpenSSL_1_1_1-stable/demos/evp/aesgcm.c">https://github.com/openssl/openssl/blob/OpenSSL_1_1_1-stable/demos/evp/aesgcm.c</a><br>转换成Python ctypes方式调用如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> ctypes</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> ctypes <span class="keyword">import</span> c_void_p, c_char_p, c_int, create_string_buffer, POINTER</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载 OpenSSL 动态库</span></span><br><span class="line">libcrypto = ctypes.CDLL(<span class="string">&quot;libcrypto.so&quot;</span>)  <span class="comment"># 根据系统选择动态库路径（Linux）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 OpenSSL 相关的函数原型</span></span><br><span class="line">libcrypto.EVP_CIPHER_CTX_new.restype = c_void_p</span><br><span class="line">libcrypto.EVP_CIPHER_CTX_new.argtypes = []</span><br><span class="line"></span><br><span class="line">libcrypto.EVP_CIPHER_CTX_free.argtypes = [c_void_p]</span><br><span class="line"></span><br><span class="line">libcrypto.EVP_CIPHER_CTX_get_params.argtypes = [c_void_p, POINTER(c_void_p)]</span><br><span class="line">libcrypto.EVP_CIPHER_free.argtypes = [c_void_p]</span><br><span class="line"></span><br><span class="line">libcrypto.EVP_EncryptInit_ex.argtypes = [</span><br><span class="line">    c_void_p,</span><br><span class="line">    c_void_p,</span><br><span class="line">    c_void_p,</span><br><span class="line">    c_char_p,</span><br><span class="line">    c_char_p,</span><br><span class="line">]</span><br><span class="line">libcrypto.EVP_EncryptUpdate.argtypes = [</span><br><span class="line">    c_void_p,</span><br><span class="line">    c_char_p,</span><br><span class="line">    POINTER(c_int),</span><br><span class="line">    c_char_p,</span><br><span class="line">    c_int,</span><br><span class="line">]</span><br><span class="line">libcrypto.EVP_EncryptFinal_ex.argtypes = [c_void_p, c_char_p, POINTER(c_int)]</span><br><span class="line"></span><br><span class="line">libcrypto.EVP_DecryptInit_ex.argtypes = [</span><br><span class="line">    c_void_p,</span><br><span class="line">    c_void_p,</span><br><span class="line">    c_void_p,</span><br><span class="line">    c_char_p,</span><br><span class="line">    c_char_p,</span><br><span class="line">]</span><br><span class="line">libcrypto.EVP_DecryptUpdate.argtypes = [</span><br><span class="line">    c_void_p,</span><br><span class="line">    c_char_p,</span><br><span class="line">    POINTER(c_int),</span><br><span class="line">    c_char_p,</span><br><span class="line">    c_int,</span><br><span class="line">]</span><br><span class="line">libcrypto.EVP_DecryptFinal_ex.argtypes = [c_void_p, c_char_p, POINTER(c_int)]</span><br><span class="line"></span><br><span class="line">libcrypto.EVP_aes_256_gcm.restype = c_void_p</span><br><span class="line">libcrypto.EVP_aes_256_gcm.argtypes = []</span><br><span class="line"></span><br><span class="line">libcrypto.EVP_CIPHER_fetch.argtypes = [c_void_p, c_char_p, c_void_p]</span><br><span class="line">libcrypto.EVP_CIPHER_fetch.restype = c_void_p</span><br><span class="line"></span><br><span class="line">libcrypto.EVP_CIPHER_CTX_ctrl.argtypes = [c_void_p, c_int, c_int, c_void_p]</span><br><span class="line">libcrypto.EVP_CIPHER_CTX_ctrl.restype = c_int</span><br><span class="line"><span class="comment"># (ctx, EVP_CTRL_AEAD_SET_IVLEN, sizeof(gcm_iv), NULL)</span></span><br><span class="line">libcrypto.BIO_dump_fp.argtypes = [c_void_p, c_void_p, c_int]</span><br><span class="line">libcrypto.BIO_dump_fp.restype = c_int</span><br><span class="line">libcrypto.fopen.argtypes = [c_char_p, c_char_p]</span><br><span class="line">libcrypto.fopen.restype = c_void_p</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># AES GCM加密</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">aes_256_gcm_encrypt</span>(<span class="params">key: <span class="built_in">bytes</span>, iv: <span class="built_in">bytes</span>, plaintext: <span class="built_in">bytes</span>, aad: <span class="built_in">bytes</span> = <span class="string">b&quot;&quot;</span></span>):</span><br><span class="line">    key_ptr = c_char_p(key)</span><br><span class="line">    iv_ptr = c_char_p(iv)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 创建加密上下文</span></span><br><span class="line">    ctx = libcrypto.EVP_CIPHER_CTX_new()</span><br><span class="line">    cipher = libcrypto.EVP_aes_256_gcm()</span><br><span class="line">    <span class="comment">#    print(11111)</span></span><br><span class="line">    <span class="comment">#    cipher = libcrypto.EVP_CIPHER_fetch(</span></span><br><span class="line">    <span class="comment">#        libctx, c_char_p(b&quot;AES-256-GCM&quot;), propq)</span></span><br><span class="line">    <span class="comment">#    print(ctypes.cast(cipher, c_void_p))</span></span><br><span class="line">    <span class="comment">#    print(11111)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 初始化加密操作</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">2222</span>)</span><br><span class="line">    ls = libcrypto.EVP_EncryptInit_ex(ctx, cipher, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>)</span><br><span class="line">    <span class="built_in">print</span>(ls)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">2222</span>)</span><br><span class="line">    libcrypto.EVP_CIPHER_CTX_ctrl(ctx, c_int(<span class="number">0x9</span>), c_int(<span class="built_in">len</span>(iv)), <span class="literal">None</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">333</span>)</span><br><span class="line">    libcrypto.EVP_EncryptInit_ex(ctx, <span class="literal">None</span>, <span class="literal">None</span>, key_ptr, iv_ptr)</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">444</span>)</span><br><span class="line">    <span class="comment"># 处理AAD（附加认证数据）</span></span><br><span class="line">    outlen = c_int(<span class="number">0</span>)</span><br><span class="line">    libcrypto.EVP_EncryptUpdate(</span><br><span class="line">        ctx, <span class="literal">None</span>, ctypes.byref(outlen), c_char_p(aad), c_int(<span class="built_in">len</span>(aad))</span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">555</span>)</span><br><span class="line">    <span class="comment"># outlen = c_int(0)</span></span><br><span class="line">    <span class="comment"># if not libcrypto.EVP_EncryptUpdate(ctx, None, None, aad_buffer, len(aad)):</span></span><br><span class="line">    <span class="comment">#    raise ValueError(&quot;Error encrypting AAD&quot;)</span></span><br><span class="line">    outbuf = create_string_buffer(<span class="built_in">len</span>(plaintext))</span><br><span class="line">    libcrypto.EVP_EncryptUpdate(</span><br><span class="line">        ctx, outbuf, ctypes.byref(outlen), c_char_p(</span><br><span class="line">            plaintext), c_int(<span class="built_in">len</span>(plaintext))</span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">666</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#    # 加密明文</span></span><br><span class="line">    <span class="comment">#    ciphertext = create_string_buffer(len(plaintext))</span></span><br><span class="line">    <span class="comment">#    if not libcrypto.EVP_EncryptUpdate(</span></span><br><span class="line">    <span class="comment">#        ctx, ciphertext, ctypes.byref(outlen), plaintext_buffer, len(plaintext)</span></span><br><span class="line">    <span class="comment">#    ):</span></span><br><span class="line">    <span class="comment">#        raise ValueError(&quot;Error encrypting plaintext&quot;)</span></span><br><span class="line">    <span class="built_in">print</span>(outbuf.raw[: outlen.value].<span class="built_in">hex</span>())</span><br><span class="line">    <span class="comment"># 获取加密后的数据</span></span><br><span class="line">    ciphertext = outbuf.raw[: outlen.value]</span><br><span class="line">    libcrypto.EVP_EncryptFinal_ex(ctx, outbuf, ctypes.byref(outlen))</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">777</span>)</span><br><span class="line">    <span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">    libcrypto.BIO_dump_fp(</span><br><span class="line">        libcrypto.fopen(<span class="string">b&quot;1&quot;</span>, <span class="string">b&quot;w&quot;</span>),</span><br><span class="line">        c_char_p(<span class="string">b&quot;test&quot;</span>),</span><br><span class="line">        <span class="built_in">len</span>(<span class="string">b&quot;test&quot;</span>),</span><br><span class="line">    )</span><br><span class="line">    libcrypto.EVP_CIPHER_CTX_ctrl(ctx, c_int(<span class="number">0x10</span>), c_int(<span class="number">16</span>), outbuf)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取认证标签</span></span><br><span class="line">    <span class="comment">#    #tag = create_string_buffer(16)</span></span><br><span class="line">    <span class="comment">#    if not libcrypto.EVP_EncryptFinal_ex(ctx, tag, ctypes.byref(outlen)):</span></span><br><span class="line">    <span class="comment">#        raise ValueError(&quot;Error finalizing encryption&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 释放上下文</span></span><br><span class="line">    libcrypto.EVP_CIPHER_CTX_free(ctx)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ciphertext, outbuf.raw</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># AES GCM 解密</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">aes_256_gcm_decrypt</span>(<span class="params"></span></span><br><span class="line"><span class="params">    key: <span class="built_in">bytes</span>, iv: <span class="built_in">bytes</span>, ciphertext: <span class="built_in">bytes</span>, aad: <span class="built_in">bytes</span> = <span class="string">b&quot;&quot;</span>, tag: <span class="built_in">bytes</span> = <span class="string">b&quot;&quot;</span></span></span><br><span class="line"><span class="params"></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;tag:&quot;</span>, tag.<span class="built_in">hex</span>())</span><br><span class="line">    ctx = libcrypto.EVP_CIPHER_CTX_new()</span><br><span class="line">    libcrypto.EVP_DecryptInit_ex(</span><br><span class="line">        ctx, libcrypto.EVP_aes_256_gcm(), <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>)</span><br><span class="line">    libcrypto.EVP_CIPHER_CTX_ctrl(ctx, c_int(<span class="number">0x9</span>), <span class="built_in">len</span>(iv), <span class="literal">None</span>)</span><br><span class="line">    libcrypto.EVP_DecryptInit_ex(ctx, <span class="literal">None</span>, <span class="literal">None</span>, c_char_p(key), c_char_p(iv))</span><br><span class="line">    outlen = c_int(<span class="number">0</span>)</span><br><span class="line">    libcrypto.EVP_DecryptUpdate(</span><br><span class="line">        ctx, <span class="literal">None</span>, ctypes.byref(outlen), c_char_p(aad), <span class="built_in">len</span>(aad)</span><br><span class="line">    )</span><br><span class="line">    outbuf = create_string_buffer(<span class="built_in">len</span>(ciphertext))</span><br><span class="line">    libcrypto.EVP_DecryptUpdate(</span><br><span class="line">        ctx, outbuf, ctypes.byref(outlen), c_char_p(</span><br><span class="line">            ciphertext), <span class="built_in">len</span>(ciphertext)</span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Plaintext:\n&quot;</span>)</span><br><span class="line">    <span class="comment"># BIO_dump_fp(stdout, outbuf, outlen);</span></span><br><span class="line">    <span class="built_in">print</span>(outbuf.raw)</span><br><span class="line">    text = outbuf.raw[: outlen.value]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;tag:&quot;</span>, tag)</span><br><span class="line">    libcrypto.EVP_CIPHER_CTX_ctrl(ctx, c_int(<span class="number">0x10</span>), <span class="built_in">len</span>(tag), c_char_p(tag))</span><br><span class="line">    rv = libcrypto.EVP_DecryptFinal_ex(ctx, outbuf, ctypes.byref(outlen))</span><br><span class="line">    <span class="built_in">print</span>(rv)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 释放解密上下文</span></span><br><span class="line">    libcrypto.EVP_CIPHER_CTX_free(ctx)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试数据</span></span><br><span class="line">key = <span class="string">b&quot;77889900112233445566778899001122&quot;</span></span><br><span class="line"><span class="built_in">print</span>(key.<span class="built_in">hex</span>())</span><br><span class="line">iv = <span class="string">b&quot;778899001122&quot;</span></span><br><span class="line"><span class="built_in">print</span>(iv.<span class="built_in">hex</span>())</span><br><span class="line">plaintext = <span class="string">b&quot;1231&quot;</span></span><br><span class="line"><span class="built_in">print</span>(plaintext.<span class="built_in">hex</span>())</span><br><span class="line">aad = <span class="string">b&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加密过程</span></span><br><span class="line">ciphertext, tag = aes_256_gcm_encrypt(key, iv, plaintext, aad)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Ciphertext: <span class="subst">&#123;ciphertext.<span class="built_in">hex</span>()&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Tag: <span class="subst">&#123;tag.<span class="built_in">hex</span>()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ciphertext = base64.b64decode(</span><br><span class="line">    <span class="string">b&quot;BGDr211pjM/koptwkyQ7iXWTBqVf1R89Z19MPY2QiIv4/h/UNXuDjjc+uQ/9ZkJqdOfZ8MH/j+P907tbTFJhYyyd2+dqyEzBSEKq8RlpZIbHyYcnw6XRdA4c4HiAcB0ZzW8Qu3gMnH3DydMSNHwx1r7oEGewL/2SgejQemo3wK7BlpKWAJ7oX/pXCrS3JRRKHE8QG6piJLyUBB+GwuggNbE7sev7StGjezNoD2y0w0gTagKfF4C/5bVxmxbDX+DFSTfPIwA7KhRa58Vm3vL2kf+RBi1/aL9SA2+a1E6uJEAt/EEzZJ+4UJPljqIkQOAEwmD99ijG1smrRfmMkXdwmEOYeckYNwoUQbPv1wOI40UfOh2etmu9nzmuSsoNDWGJza9x4CwOXlIHvPbZtBbYO20mBy0W2byx7dh+vGbzeLgBJ8IWbHc50DNAV6GA/sxifcZPZs8USn42WoKtuKqrUVq28H+faCNvaVdSbI+ZUSG6F/euDMVdguWMlfub4J3KLxC346MDCRoX6bEXG3J4+Mo7JPi+xfoh2JKewHF2D4RgJIEkPt9ffhEDKG7jtJGSzYYqfKBEVU2/vDuGV8Y+nHmsGFcbCiM1I7onmMS1L977O0UEMwvz8cIjnXd9kRMhGrBU6yR0DvEZ67K3a5wCxbwEbNaWPy5n2oDUF3mWESXSMSIgdN6qcgpok95xegLmcEkKtp4MYdd/cT7IS2qtWJmNJKiAqg==&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">tag = <span class="string">b&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">iv = base64.b64decode(<span class="string">b&quot;eorS/CBlfWrqeWWj&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(iv.<span class="built_in">hex</span>())</span><br><span class="line">key = <span class="string">b&quot;4e3b9ft1a68eb6548af9y895c1b14ad5&quot;</span></span><br><span class="line"><span class="comment"># 解密过程</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    decrypted_plaintext = aes_256_gcm_decrypt(key, iv, ciphertext, aad, tag)</span><br><span class="line">    <span class="built_in">print</span>(decrypted_plaintext[:-<span class="number">16</span>])</span><br><span class="line"><span class="keyword">except</span> ValueError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="RSA非对称加解密相关，使用chatgpt生成手动修护了异常和错误"><a href="#RSA非对称加解密相关，使用chatgpt生成手动修护了异常和错误" class="headerlink" title="RSA非对称加解密相关，使用chatgpt生成手动修护了异常和错误"></a>RSA非对称加解密相关，使用chatgpt生成手动修护了异常和错误</h2><h3 id="加密"><a href="#加密" class="headerlink" title="加密"></a>加密</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ctypes</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">from</span> ctypes <span class="keyword">import</span> c_char_p, c_void_p, POINTER</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载 OpenSSL 动态库（Linux 下通常是 libcrypto.so）</span></span><br><span class="line">libcrypto = ctypes.CDLL(<span class="string">&quot;libcrypto.so&quot;</span>)  <span class="comment"># 根据系统调整库的路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义 C 函数原型</span></span><br><span class="line">libcrypto.PEM_read_RSAPrivateKey.argtypes = [</span><br><span class="line">    c_void_p,</span><br><span class="line">    POINTER(c_void_p),</span><br><span class="line">    c_void_p,</span><br><span class="line">    c_void_p,</span><br><span class="line">]</span><br><span class="line">libcrypto.PEM_read_RSAPrivateKey.restype = c_void_p  <span class="comment"># 返回类型是 RSA*</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开私钥文件的 C 函数</span></span><br><span class="line">libcrypto.fopen.argtypes = [c_char_p, c_char_p]</span><br><span class="line">libcrypto.fopen.restype = c_void_p  <span class="comment"># 返回 FILE*，即 void*</span></span><br><span class="line"><span class="comment"># 定义 C 函数原型</span></span><br><span class="line">libcrypto.BN_bn2hex.argtypes = [c_void_p]</span><br><span class="line">libcrypto.BN_bn2hex.restype = c_char_p  <span class="comment"># 返回类型是 C 字符串</span></span><br><span class="line"></span><br><span class="line">libcrypto.BN_bn2dec.argtypes = [c_void_p]</span><br><span class="line">libcrypto.BN_bn2dec.restype = c_char_p  <span class="comment"># 返回类型是 C 字符串</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开文件</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">open_file</span>(<span class="params">filename</span>):</span><br><span class="line">    <span class="keyword">return</span> libcrypto.fopen(filename.encode(<span class="string">&quot;utf-8&quot;</span>), <span class="string">b&quot;r&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># RSA_get0_key: 获取 RSA 密钥的模数和公钥指数</span></span><br><span class="line">libcrypto.RSA_get0_key.argtypes = [</span><br><span class="line">    c_void_p,</span><br><span class="line">    POINTER(c_void_p),</span><br><span class="line">    POINTER(c_void_p),</span><br><span class="line">    c_void_p,</span><br><span class="line">]</span><br><span class="line">libcrypto.RSA_get0_key.restype = <span class="literal">None</span>  <span class="comment"># 返回类型是 void</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印 RSA 密钥信息</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_rsa_info</span>(<span class="params">rsa</span>):</span><br><span class="line">    <span class="keyword">if</span> rsa <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;RSA key is NULL.&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取模数和公钥指数</span></span><br><span class="line">    n = c_void_p()</span><br><span class="line">    e = c_void_p()</span><br><span class="line">    libcrypto.RSA_get0_key(rsa, ctypes.byref(n), ctypes.byref(e), <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打印模数 (n)</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;RSA Key Info:&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;  Modulus (n):&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用 sys.stdout 获取 FILE* 类型</span></span><br><span class="line">    n_hex = libcrypto.BN_bn2hex(n)</span><br><span class="line">    <span class="built_in">print</span>(n_hex.decode())  <span class="comment"># 打印十六进制表示</span></span><br><span class="line">    <span class="comment"># libcrypto.BN_print_fp(stdout_fp, n)  # 输出到标准输出</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n  Public exponent (e):&quot;</span>)</span><br><span class="line">    e_hex = libcrypto.BN_bn2hex(e)</span><br><span class="line">    <span class="built_in">print</span>(e_hex.decode())  <span class="comment"># 打印十六进制表示</span></span><br><span class="line">    <span class="comment"># libcrypto.BN_print_fp(stdout_fp, e)  # 输出到标准输出</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取 RSA 密钥的大小</span></span><br><span class="line">    bits = (</span><br><span class="line">        libcrypto.RSA_size(ctypes.cast(rsa, c_void_p)) * <span class="number">8</span></span><br><span class="line">    )  <span class="comment"># RSA_size 返回字节数，乘以 8 转换为位数</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;  Key size: <span class="subst">&#123;bits&#125;</span> bits&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 错误打印函数</span></span><br><span class="line">libcrypto.ERR_print_errors_fp.argtypes = [c_void_p]</span><br><span class="line">libcrypto.ERR_print_errors_fp.restype = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载私钥</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_private_key</span>(<span class="params">privkey_filename</span>):</span><br><span class="line">    <span class="comment"># 打开文件</span></span><br><span class="line">    privkey_file = open_file(privkey_filename)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> privkey_file:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Unable to open private key file&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 加载 RSA 私钥</span></span><br><span class="line">    rsa = libcrypto.PEM_read_RSAPrivateKey(privkey_file, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> rsa:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Unable to load private key&quot;</span>)</span><br><span class="line">        libcrypto.ERR_print_errors_fp(<span class="literal">None</span>)  <span class="comment"># 输出 OpenSSL 错误</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Private key loaded successfully from <span class="subst">&#123;privkey_filename&#125;</span>.&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> rsa</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line">privkey_filename = <span class="string">&quot;private_key.pem&quot;</span></span><br><span class="line">rsa_privkey = load_private_key(privkey_filename)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> rsa_privkey:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Private key loaded successfully&quot;</span>)</span><br><span class="line">    print_rsa_info(rsa_privkey)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Failed to load private key&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 分块加密</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">encrypt_rsa</span>(<span class="params">rsa, data</span>):</span><br><span class="line">    rsa_len = libcrypto.RSA_size(ctypes.cast(rsa, c_void_p))</span><br><span class="line">    block_size = rsa_len - <span class="number">11</span>  <span class="comment"># 最大加密块大小：RSA_size - 填充空间</span></span><br><span class="line"></span><br><span class="line">    encrypted_data = ctypes.create_string_buffer(</span><br><span class="line">        rsa_len * ((<span class="built_in">len</span>(data) // block_size) + <span class="number">1</span>)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    data_len = <span class="built_in">len</span>(data)</span><br><span class="line">    encrypted_len = <span class="number">0</span></span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> i &lt; data_len:</span><br><span class="line">        chunk_len = <span class="built_in">min</span>(block_size, data_len - i)</span><br><span class="line">        <span class="comment"># 对当前块进行加密</span></span><br><span class="line">        len_encrypted = libcrypto.RSA_private_encrypt(</span><br><span class="line">            chunk_len,</span><br><span class="line">            ctypes.byref(ctypes.create_string_buffer(data[i: i + chunk_len])),</span><br><span class="line">            ctypes.byref(encrypted_data, encrypted_len),</span><br><span class="line">            ctypes.cast(rsa, c_void_p),</span><br><span class="line">            <span class="number">1</span>,  <span class="comment"># RSA_PKCS1_OAEP_PADDING</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> len_encrypted == -<span class="number">1</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;RSA encryption failed&quot;</span>)</span><br><span class="line">            libcrypto.ERR_print_errors_fp(sys.stderr)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        encrypted_len += len_encrypted</span><br><span class="line">        i += chunk_len</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> encrypted_data.raw[:encrypted_len]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 待加密的数据</span></span><br><span class="line"><span class="comment"># data = b&quot;Hello, RSA encryption! This is a long message that will be split into multiple blocks.&quot;</span></span><br><span class="line">data = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">test_-------TEST</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>.encode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Original Data (length: <span class="subst">&#123;<span class="built_in">len</span>(data)&#125;</span>):\n<span class="subst">&#123;data.decode()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加密</span></span><br><span class="line">encrypted_data = encrypt_rsa(rsa_privkey, data)</span><br><span class="line"><span class="keyword">if</span> encrypted_data <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;\nEncrypted Data (length: <span class="subst">&#123;<span class="built_in">len</span>(encrypted_data)&#125;</span>):&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot; &quot;</span>.join(<span class="string">f&quot;<span class="subst">&#123;byte:02x&#125;</span>&quot;</span> <span class="keyword">for</span> byte <span class="keyword">in</span> encrypted_data))</span><br><span class="line"><span class="built_in">print</span>(base64.b64encode(encrypted_data))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="解密"><a href="#解密" class="headerlink" title="解密"></a>解密</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ctypes</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> ctypes <span class="keyword">import</span> c_char_p, c_void_p, POINTER</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载 OpenSSL 动态库（Linux 下通常是 libcrypto.so）</span></span><br><span class="line">libcrypto = ctypes.CDLL(<span class="string">&quot;libcrypto.so&quot;</span>)  <span class="comment"># 根据系统调整库的路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用于错误处理</span></span><br><span class="line">libcrypto.ERR_print_errors_fp.argtypes = [c_void_p]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开私钥文件的 C 函数</span></span><br><span class="line">libcrypto.fopen.argtypes = [c_char_p, c_char_p]</span><br><span class="line">libcrypto.fopen.restype = c_void_p  <span class="comment"># 返回 FILE*，即 void*</span></span><br><span class="line"><span class="comment"># 定义 C 函数原型</span></span><br><span class="line">libcrypto.BN_bn2hex.argtypes = [c_void_p]</span><br><span class="line">libcrypto.BN_bn2hex.restype = c_char_p  <span class="comment"># 返回类型是 C 字符串</span></span><br><span class="line"></span><br><span class="line">libcrypto.BN_bn2dec.argtypes = [c_void_p]</span><br><span class="line">libcrypto.BN_bn2dec.restype = c_char_p  <span class="comment"># 返回类型是 C 字符串</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开文件</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">open_file</span>(<span class="params">filename</span>):</span><br><span class="line">    <span class="keyword">return</span> libcrypto.fopen(filename.encode(<span class="string">&quot;utf-8&quot;</span>), <span class="string">b&quot;r&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># RSA_get0_key: 获取 RSA 密钥的模数和公钥指数</span></span><br><span class="line">libcrypto.RSA_get0_key.argtypes = [</span><br><span class="line">    c_void_p,</span><br><span class="line">    POINTER(c_void_p),</span><br><span class="line">    POINTER(c_void_p),</span><br><span class="line">    c_void_p,</span><br><span class="line">]</span><br><span class="line">libcrypto.RSA_get0_key.restype = <span class="literal">None</span>  <span class="comment"># 返回类型是 void</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印 RSA 密钥信息</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_rsa_info</span>(<span class="params">rsa</span>):</span><br><span class="line">    <span class="keyword">if</span> rsa <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;RSA key is NULL.&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取模数和公钥指数</span></span><br><span class="line">    n = c_void_p()</span><br><span class="line">    e = c_void_p()</span><br><span class="line">    libcrypto.RSA_get0_key(rsa, ctypes.byref(n), ctypes.byref(e), <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打印模数 (n)</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;RSA Key Info:&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;  Modulus (n):&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用 sys.stdout 获取 FILE* 类型</span></span><br><span class="line">    n_hex = libcrypto.BN_bn2hex(n)</span><br><span class="line">    <span class="built_in">print</span>(n_hex.decode())  <span class="comment"># 打印十六进制表示</span></span><br><span class="line">    <span class="comment"># libcrypto.BN_print_fp(stdout_fp, n)  # 输出到标准输出</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n  Public exponent (e):&quot;</span>)</span><br><span class="line">    e_hex = libcrypto.BN_bn2hex(e)</span><br><span class="line">    <span class="built_in">print</span>(e_hex.decode())  <span class="comment"># 打印十六进制表示</span></span><br><span class="line">    <span class="comment"># libcrypto.BN_print_fp(stdout_fp, e)  # 输出到标准输出</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取 RSA 密钥的大小</span></span><br><span class="line">    bits = (</span><br><span class="line">        libcrypto.RSA_size(ctypes.cast(rsa, c_void_p)) * <span class="number">8</span></span><br><span class="line">    )  <span class="comment"># RSA_size 返回字节数，乘以 8 转换为位数</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;  Key size: <span class="subst">&#123;bits&#125;</span> bits&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义 C 函数原型</span></span><br><span class="line">libcrypto.PEM_read_RSA_PUBKEY.argtypes = [</span><br><span class="line">    c_void_p, c_void_p, c_void_p, c_void_p]</span><br><span class="line">libcrypto.PEM_read_RSA_PUBKEY.restype = c_void_p  <span class="comment"># 返回 RSA 对象指针</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载 RSA 公钥并打印信息</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_public_key</span>(<span class="params">pubkey_filename</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 打开文件并加载公钥</span></span><br><span class="line">        public_file = open_file(pubkey_filename)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> public_file:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Unable to open private key file&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="comment"># 创建 C 字符串指针，指向文件内容</span></span><br><span class="line">        <span class="comment"># buffer = ctypes.create_string_buffer(file_data)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 加载 RSA 公钥</span></span><br><span class="line">        rsa1 = libcrypto.PEM_read_RSA_PUBKEY(public_file, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> rsa1:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Failed to load public key.&quot;</span>)</span><br><span class="line">            libcrypto.ERR_print_errors_fp(sys.stderr)  <span class="comment"># 打印 OpenSSL 错误</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Public key loaded successfully from <span class="subst">&#123;pubkey_filename&#125;</span>.&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> rsa1</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;An error occurred: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line">pubkey_filename = <span class="string">&quot;public_key.pem&quot;</span></span><br><span class="line">rsa_pubkey = load_public_key(pubkey_filename)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> rsa_pubkey:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Private key loaded successfully&quot;</span>)</span><br><span class="line">    print_rsa_info(rsa_pubkey)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Failed to load private key&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 分块解密</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">decrypt_rsa</span>(<span class="params">rsa, encrypted_data</span>):</span><br><span class="line">    rsa_len = libcrypto.RSA_size(ctypes.cast(rsa, c_void_p))</span><br><span class="line">    block_size = rsa_len</span><br><span class="line">    encrypted_len = <span class="built_in">len</span>(encrypted_data)</span><br><span class="line"></span><br><span class="line">    decrypted_data = ctypes.create_string_buffer(encrypted_len)</span><br><span class="line"></span><br><span class="line">    decrypted_len = <span class="number">0</span></span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> i &lt; encrypted_len:</span><br><span class="line">        <span class="comment"># 对当前块进行解密</span></span><br><span class="line">        len_decrypted = libcrypto.RSA_public_decrypt(</span><br><span class="line">            block_size,</span><br><span class="line">            ctypes.byref(</span><br><span class="line">                ctypes.create_string_buffer(encrypted_data[i: i + block_size])</span><br><span class="line">            ),</span><br><span class="line">            ctypes.byref(decrypted_data, decrypted_len),</span><br><span class="line">            ctypes.cast(rsa, c_void_p),</span><br><span class="line">            <span class="number">1</span>,  <span class="comment"># RSA_PKCS1_OAEP_PADDING</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> len_decrypted == -<span class="number">1</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;RSA decryption failed&quot;</span>)</span><br><span class="line">            libcrypto.ERR_print_errors_fp(sys.stderr)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        decrypted_len += len_decrypted</span><br><span class="line">        i += block_size</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> decrypted_data.raw[:decrypted_len]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">encrypted_base64 = <span class="string">b&quot;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&quot;</span></span><br><span class="line">encrypted_data = base64.b64decode(encrypted_base64)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解密</span></span><br><span class="line">decrypted_data = decrypt_rsa(rsa_pubkey, encrypted_data)</span><br><span class="line"><span class="keyword">if</span> decrypted_data <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;\nDecrypted Data:\n<span class="subst">&#123;decrypted_data.decode()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hexo.zdu.us.kg/2024/12/18/Python-ctypes%E8%B0%83%E7%94%A8openssl%E5%8A%A8%E6%80%81C%E5%BA%93%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BE%8B%E5%AD%90/" data-id="cm4trgyl300001vsbhzhn7ucw" data-title="Python ctypes调用openssl动态C库的一些例子" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-k8s二进制在Ubuntu下部署" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/11/25/k8s%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%9C%A8Ubuntu%E4%B8%8B%E9%83%A8%E7%BD%B2/" class="article-date">
  <time class="dt-published" datetime="2024-11-25T02:53:15.000Z" itemprop="datePublished">2024-11-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/11/25/k8s%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%9C%A8Ubuntu%E4%B8%8B%E9%83%A8%E7%BD%B2/">k8s二进制在Ubuntu下部署</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="自用部署k8s记录"><a href="#自用部署k8s记录" class="headerlink" title="自用部署k8s记录"></a>自用部署k8s记录</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | sudo tee /etc/sysctl.d/k8s.conf</span></span><br><span class="line"><span class="string">net.ipv4.ip_forward = 1</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Apply sysctl params without reboot</span></span><br><span class="line"><span class="built_in">sudo</span> sysctl --system</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | sudo tee /etc/modules-load.d/k8s.conf</span></span><br><span class="line"><span class="string">overlay</span></span><br><span class="line"><span class="string">br_netfilter</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> modprobe overlay</span><br><span class="line"><span class="built_in">sudo</span> modprobe br_netfilter</span><br><span class="line"></span><br><span class="line"><span class="comment">#curl -L -O &#x27;https://github.com/containerd/containerd/releases/download/v1.7.22/containerd-1.7.22-linux-amd64.tar.gz&#x27;</span></span><br><span class="line"><span class="built_in">sudo</span> tar Cxzvf /usr/local containerd-1.7.21-linux-amd64.tar.gz</span><br><span class="line"><span class="comment">#curl -L -o /usr/local/lib/systemd/system/containerd.service &#x27;https://raw.githubusercontent.com/containerd/containerd/main/containerd.service&#x27;</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /usr/local/lib/systemd/system/</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> containerd.service /usr/local/lib/systemd/system/containerd.service</span><br><span class="line"><span class="built_in">sudo</span> systemctl daemon-reload</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> --now containerd</span><br><span class="line"><span class="comment">#curl -L -O &#x27;https://github.com/opencontainers/runc/releases/download/v1.1.15/runc.amd64&#x27;</span></span><br><span class="line"><span class="built_in">sudo</span> install -m 755 runc.amd64 /usr/local/sbin/runc</span><br><span class="line"></span><br><span class="line"><span class="comment">#curl -L -O &#x27;https://github.com/containernetworking/plugins/releases/download/v1.5.1/cni-plugins-linux-amd64-v1.5.1.tgz&#x27;</span></span><br><span class="line"><span class="comment">#mkdir -p /opt/cni/bin</span></span><br><span class="line"><span class="comment">#tar Cxzvf /opt/cni/bin cni-plugins-linux-amd64-v1.1.1.tgz</span></span><br><span class="line"></span><br><span class="line">CNI_PLUGINS_VERSION=<span class="string">&quot;v1.5.1&quot;</span></span><br><span class="line">ARCH=<span class="string">&quot;amd64&quot;</span></span><br><span class="line">DEST=<span class="string">&quot;/opt/cni/bin&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$DEST</span>&quot;</span></span><br><span class="line"><span class="comment">#curl -L &quot;https://github.com/containernetworking/plugins/releases/download/$&#123;CNI_PLUGINS_VERSION&#125;/cni-plugins-linux-$&#123;ARCH&#125;-$&#123;CNI_PLUGINS_VERSION&#125;.tgz&quot; | sudo tar -C &quot;$DEST&quot; -xz</span></span><br><span class="line"><span class="built_in">cat</span> cni-plugins-linux-<span class="variable">$&#123;ARCH&#125;</span>-<span class="variable">$&#123;CNI_PLUGINS_VERSION&#125;</span>.tgz | <span class="built_in">sudo</span> tar -C <span class="string">&quot;<span class="variable">$DEST</span>&quot;</span> -xz</span><br><span class="line"></span><br><span class="line">DOWNLOAD_DIR=<span class="string">&quot;/usr/local/bin&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$DOWNLOAD_DIR</span>&quot;</span></span><br><span class="line"></span><br><span class="line">CRICTL_VERSION=<span class="string">&quot;v1.31.1&quot;</span></span><br><span class="line">ARCH=<span class="string">&quot;amd64&quot;</span></span><br><span class="line"><span class="comment">#curl -L &quot;https://github.com/kubernetes-sigs/cri-tools/releases/download/$&#123;CRICTL_VERSION&#125;/crictl-$&#123;CRICTL_VERSION&#125;-linux-$&#123;ARCH&#125;.tar.gz&quot; | sudo tar -C $DOWNLOAD_DIR -xz</span></span><br><span class="line"><span class="built_in">cat</span> crictl-<span class="variable">$&#123;CRICTL_VERSION&#125;</span>-linux-<span class="variable">$&#123;ARCH&#125;</span>.tar.gz | <span class="built_in">sudo</span> tar -C <span class="variable">$DOWNLOAD_DIR</span> -xz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RELEASE=<span class="string">&quot;v1.31.1&quot;</span></span><br><span class="line">ARCH=<span class="string">&quot;amd64&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> &#123;kubeadm,kubelet&#125; <span class="variable">$DOWNLOAD_DIR</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$DOWNLOAD_DIR</span></span><br><span class="line"><span class="comment">#sudo curl -L --remote-name-all https://dl.k8s.io/release/$&#123;RELEASE&#125;/bin/linux/$&#123;ARCH&#125;/&#123;kubeadm,kubelet&#125;</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x &#123;kubeadm,kubelet&#125;</span><br><span class="line"><span class="built_in">cd</span> -</span><br><span class="line">RELEASE_VERSION=<span class="string">&quot;master&quot;</span></span><br><span class="line"><span class="comment">#curl -sSL &quot;https://raw.githubusercontent.com/kubernetes/release/$&#123;RELEASE_VERSION&#125;/cmd/krel/templates/latest/kubelet/kubelet.service&quot; | sed &quot;s:/usr/bin:$&#123;DOWNLOAD_DIR&#125;:g&quot; | sudo tee /usr/lib/systemd/system/kubelet.service</span></span><br><span class="line"><span class="built_in">cat</span> kubelet.service | sed <span class="string">&quot;s:/usr/bin:<span class="variable">$&#123;DOWNLOAD_DIR&#125;</span>:g&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /usr/lib/systemd/system/kubelet.service</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /usr/lib/systemd/system/kubelet.service.d</span><br><span class="line"><span class="comment">#curl -sSL &quot;https://raw.githubusercontent.com/kubernetes/release/$&#123;RELEASE_VERSION&#125;/cmd/krel/templates/latest/kubeadm/10-kubeadm.conf&quot; | sed &quot;s:/usr/bin:$&#123;DOWNLOAD_DIR&#125;:g&quot; | sudo tee /usr/lib/systemd/system/kubelet.service.d/10-kubeadm.conf</span></span><br><span class="line"><span class="built_in">cat</span> 10-kubeadm.conf | sed <span class="string">&quot;s:/usr/bin:<span class="variable">$&#123;DOWNLOAD_DIR&#125;</span>:g&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /usr/lib/systemd/system/kubelet.service.d/10-kubeadm.conf</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#curl -LO &quot;https://dl.k8s.io/release/v1.31.1/bin/linux/amd64/kubectl&quot;</span></span><br><span class="line"><span class="built_in">chmod</span> +x kubectl</span><br><span class="line"><span class="built_in">mkdir</span> -p ~/.local/bin</span><br><span class="line"><span class="built_in">cp</span> ./kubectl ~/.local/bin/kubectl</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> --now kubelet</span><br><span class="line"><span class="comment"># 以下导入离线镜像是在k8s官方仓库被墙的墙框下才需要，因为最新的配置已经加入了自定义的k8s仓库代理，故只要在网络联通的情况下不再需要手动单独导入了。</span></span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import coredns:v1.11.1.tar</span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import etcd:3.5.15-0.tar</span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import kube-apiserver:v1.31.0.tar</span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import kube-controller-manager:v1.31.0.tar</span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import kube-proxy:v1.31.0.tar</span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import kube-scheduler:v1.31.0.tar</span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import pause:3.10.tar</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /etc/containerd/</span><br><span class="line"><span class="built_in">sudo</span> containerd config default | <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/containerd/config.toml</span><br><span class="line"><span class="built_in">sudo</span> sed -i <span class="string">&#x27;s/SystemdCgroup *= *false/SystemdCgroup = true/&#x27;</span> /etc/containerd/config.toml</span><br><span class="line"><span class="built_in">sudo</span> sed -i <span class="string">&#x27;s@sandbox_image *= *&quot;registry.k8s.io/pause:3.8&quot;@sandbox_image = &quot;registry.k8s.io/pause:3.10&quot;@g&#x27;</span> /etc/containerd/config.toml</span><br><span class="line"><span class="built_in">sudo</span> sed -i <span class="string">&#x27;s@\&lt;config_path = &quot;&quot;@config_path = &quot;/etc/containerd/certs.d&quot;@g&#x27;</span> /etc/containerd/config.toml</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /etc/containerd/certs.d/_default</span><br><span class="line"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF | sudo tee /etc/containerd/certs.d/_default/hosts.toml</span></span><br><span class="line"><span class="string">[host.&quot;https://docker.505345784.xyz&quot;]</span></span><br><span class="line"><span class="string">  capabilities = [&quot;pull&quot;, &quot;resolve&quot;]</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl restart containerd</span><br><span class="line"><span class="built_in">sudo</span> apt install -y socat conntrack</span><br><span class="line"><span class="built_in">sudo</span> kubeadm init --kubernetes-version 1.31.0</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$HOME</span>/.kube</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -rf /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chown</span> $(<span class="built_in">id</span> -u):$(<span class="built_in">id</span> -g) <span class="variable">$HOME</span>/.kube/config</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF | sudo tee /etc/cni/net.d/10-containerd-net.conflist</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string"> &quot;cniVersion&quot;: &quot;1.0.0&quot;,</span></span><br><span class="line"><span class="string"> &quot;name&quot;: &quot;containerd-net&quot;,</span></span><br><span class="line"><span class="string"> &quot;plugins&quot;: [</span></span><br><span class="line"><span class="string">   &#123;</span></span><br><span class="line"><span class="string">     &quot;type&quot;: &quot;bridge&quot;,</span></span><br><span class="line"><span class="string">     &quot;bridge&quot;: &quot;cni0&quot;,</span></span><br><span class="line"><span class="string">     &quot;isGateway&quot;: true,</span></span><br><span class="line"><span class="string">     &quot;ipMasq&quot;: true,</span></span><br><span class="line"><span class="string">     &quot;promiscMode&quot;: true,</span></span><br><span class="line"><span class="string">     &quot;ipam&quot;: &#123;</span></span><br><span class="line"><span class="string">       &quot;type&quot;: &quot;host-local&quot;,</span></span><br><span class="line"><span class="string">       &quot;ranges&quot;: [</span></span><br><span class="line"><span class="string">         [&#123;</span></span><br><span class="line"><span class="string">           &quot;subnet&quot;: &quot;10.88.0.0/16&quot;</span></span><br><span class="line"><span class="string">         &#125;],</span></span><br><span class="line"><span class="string">         [&#123;</span></span><br><span class="line"><span class="string">           &quot;subnet&quot;: &quot;2001:db8:4860::/64&quot;</span></span><br><span class="line"><span class="string">         &#125;]</span></span><br><span class="line"><span class="string">       ],</span></span><br><span class="line"><span class="string">       &quot;routes&quot;: [</span></span><br><span class="line"><span class="string">         &#123; &quot;dst&quot;: &quot;0.0.0.0/0&quot; &#125;,</span></span><br><span class="line"><span class="string">         &#123; &quot;dst&quot;: &quot;::/0&quot; &#125;</span></span><br><span class="line"><span class="string">       ]</span></span><br><span class="line"><span class="string">     &#125;</span></span><br><span class="line"><span class="string">   &#125;,</span></span><br><span class="line"><span class="string">   &#123;</span></span><br><span class="line"><span class="string">     &quot;type&quot;: &quot;portmap&quot;,</span></span><br><span class="line"><span class="string">     &quot;capabilities&quot;: &#123;&quot;portMappings&quot;: true&#125;,</span></span><br><span class="line"><span class="string">     &quot;externalSetMarkChain&quot;: &quot;KUBE-MARK-MASQ&quot;</span></span><br><span class="line"><span class="string">   &#125;</span></span><br><span class="line"><span class="string"> ]</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> systemctl restart containerd</span><br><span class="line"><span class="comment"># docker镜像服务器被墙时候进行手动导入镜像，最新的配置了自定义docker容器代理；可以在线拉去了。</span></span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import --platform linux/amd64 kafka.tar</span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import --platform linux/amd64 minio.tar</span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import --platform linux/amd64 mysql.tar</span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import --platform linux/amd64 nacos.tar</span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import --platform linux/amd64 nginx.tar</span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import --platform linux/amd64 openjdk.tar</span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import --platform linux/amd64 redis.tar</span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import --platform linux/amd64 seata.tar</span><br><span class="line"><span class="built_in">sudo</span> ctr -n k8s.io i import --platform linux/amd64 kkfileview.tar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 消除污点</span></span><br><span class="line">kubectl taint nodes --all node-role.kubernetes.io/control-plane-</span><br></pre></td></tr></table></figure>

<p>注意：最新的版本号可以到github上面进行查询后修改。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hexo.zdu.us.kg/2024/11/25/k8s%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%9C%A8Ubuntu%E4%B8%8B%E9%83%A8%E7%BD%B2/" data-id="cm3x5yrjy0001m7sb2qrjgvvq" data-title="k8s二进制在Ubuntu下部署" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-nginx自签SSL证书生成和配置" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/11/25/nginx%E8%87%AA%E7%AD%BESSL%E8%AF%81%E4%B9%A6%E7%94%9F%E6%88%90%E5%92%8C%E9%85%8D%E7%BD%AE/" class="article-date">
  <time class="dt-published" datetime="2024-11-25T02:34:05.000Z" itemprop="datePublished">2024-11-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/11/25/nginx%E8%87%AA%E7%AD%BESSL%E8%AF%81%E4%B9%A6%E7%94%9F%E6%88%90%E5%92%8C%E9%85%8D%E7%BD%AE/">nginx自签SSL证书生成和配置</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ openssl req -x509 -nodes -days 3650 -newkey rsa:2048 -subj <span class="string">&quot;/C=CN/ST=SiChuan/L=ChengDu/O=ACS&quot;</span> -keyout CA-private.key -out CA-certificate.crt -reqexts v3_req -extensions v3_ca</span><br><span class="line">$ openssl genrsa -out private.key 2048</span><br><span class="line">$ openssl req -new -key private.key -subj <span class="string">&quot;/C=CN/ST=SiChuan/L=ChengDu/O=ACS/CN=secrets--manager.oss-cn-shanghai.aliyuncs.com&quot;</span> -sha256 -out private.csr</span><br><span class="line">$ <span class="built_in">cat</span> &gt; private.ext &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">[ req ]</span></span><br><span class="line"><span class="string">default_bits = 1024</span></span><br><span class="line"><span class="string">distinguished_name = req_distinguished_name</span></span><br><span class="line"><span class="string">req_extensions = san</span></span><br><span class="line"><span class="string">extensions = san</span></span><br><span class="line"><span class="string">[ req_distinguished_name ]</span></span><br><span class="line"><span class="string">countryName = CN</span></span><br><span class="line"><span class="string">stateOrProvinceName = Definesys</span></span><br><span class="line"><span class="string">localityName = Definesys</span></span><br><span class="line"><span class="string">organizationName = Definesys</span></span><br><span class="line"><span class="string">[SAN]</span></span><br><span class="line"><span class="string">authorityKeyIdentifier=keyid,issuer</span></span><br><span class="line"><span class="string">basicConstraints=CA:FALSE</span></span><br><span class="line"><span class="string">keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment</span></span><br><span class="line"><span class="string">subjectAltName = DNS:secrets--manager.oss-cn-shanghai.aliyuncs.com</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="comment"># subjectAltName可以是DNS和IP,写法: DNS:域名.com/IP:192.168.1.1; 多个用逗号隔开。</span></span><br><span class="line">$ openssl x509 -req -days 3650 -<span class="keyword">in</span> private.csr -CA CA-certificate.crt -CAkey CA-private.key -CAcreateserial -sha256 -out private.crt -extfile private.ext -extensions SAN</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen 443 ssl;</span><br><span class="line">        server_name  secrets--manager.oss-cn-shanghai.aliyuncs.com;</span><br><span class="line">        keepalive_timeout  65;</span><br><span class="line">        client_max_body_size 512m;</span><br><span class="line">        client_header_buffer_size 1024k;</span><br><span class="line">        large_client_header_buffers 4 1024k;</span><br><span class="line">        client_body_timeout      5m;</span><br><span class="line">        ssl_certificate <span class="string">&quot;/etc/nginx/conf.d/ssl/private.crt&quot;</span>;</span><br><span class="line">        ssl_certificate_key <span class="string">&quot;/etc/nginx/conf.d/ssl/private.key&quot;</span>;</span><br><span class="line">        ssl_session_timeout  10m;</span><br><span class="line">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class="line">        ssl_ciphers HIGH:!ADH:!aNULL:!MD5:!3DES:!IDEA:!DES;</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line">        ssl_session_cache shared:SSL:10m;</span><br><span class="line">        <span class="comment">#ssl_session_timeout  10m;</span></span><br><span class="line">        <span class="comment">#ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span></span><br><span class="line">        <span class="comment">#ssl_ciphers ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES256-GCM-SHA384:AES128-GCM-SHA256:AES256-SHA256:AES128-SHA256:AES256-SHA:AES128-SHA:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!MD5:!PSK:!RC4;</span></span><br><span class="line">        <span class="comment">#ssl_prefer_server_ciphers on;</span></span><br><span class="line">        fastcgi_param HTTPS <span class="variable">$https</span> if_not_empty;</span><br><span class="line"></span><br><span class="line">        <span class="comment">###### 根目录 #######</span></span><br><span class="line">        <span class="comment">#location / &#123;</span></span><br><span class="line">            <span class="comment">#add_header Access-Control-Allow-Origin *;</span></span><br><span class="line">            <span class="comment">#add_header Access-Control-Allow-Credentials: true;</span></span><br><span class="line">            <span class="comment">#add_header Access-Control-Allow-Headers &quot;Origin, X-Requested-With, Content-Type, Accept&quot;;</span></span><br><span class="line">            <span class="comment">#add_header Access-Control-Allow-Methods &quot;GET, POST, OPTIONS&quot;;</span></span><br><span class="line">            <span class="comment">#root /usr/share/nginx/html/sqfy;</span></span><br><span class="line">            <span class="comment">#index index.html;</span></span><br><span class="line">            <span class="comment">#proxy_pass http://nginx:80/;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line">        add_header Alt-Svc <span class="string">&#x27;h3=&quot;:443&quot;; ma=86400&#x27;</span>;</span><br><span class="line">        add_header Cross-0rigin-Opener-Policy same-origin;</span><br><span class="line">        add_header Cross-0rigin-Embedder-Policy require-corp;</span><br><span class="line">        location / &#123;</span><br><span class="line">            <span class="comment">#add_header Access-Control-Allow-Origin *;</span></span><br><span class="line">            <span class="comment">#add_header Access-Control-Allow-Credentials: true;</span></span><br><span class="line">            <span class="comment">#add_header Access-Control-Allow-Headers &quot;Origin, X-Requested-With, Content-Type, Accept&quot;;</span></span><br><span class="line">            <span class="comment">#add_header Access-Control-Allow-Methods &quot;GET, POST, OPTIONS&quot;;</span></span><br><span class="line">            root /usr/share/nginx/html;</span><br><span class="line">            index index.html;</span><br><span class="line">        &#125;</span><br><span class="line">        location /mes-secrets-manager.json &#123;</span><br><span class="line">            default_type application/json;</span><br><span class="line">            <span class="built_in">return</span> 200 <span class="string">&#x27;&#123;&quot;tokenKey&quot;:&quot;UoeqTwLRGtZJug==&quot;,&quot;jksResourceName&quot;:&quot;xxx-jwt.jks&quot;,&quot;jksName&quot;:&quot;xxxx&quot;,&quot;jksAlias&quot;:&quot;iyunware-oauth-jwt&quot;,&quot;authorizationKey&quot;:&quot;&quot;,&quot;refreshTokenKey&quot;:&quot;&quot;,&quot;platformKey&quot;:&quot;&quot;,&quot;mapKey&quot;:&quot;&quot;&#125;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="将CA-certificate-crt复制到-usr-local-share-ca-certificates-然后执行update-ca-certificates更新证书缓存"><a href="#将CA-certificate-crt复制到-usr-local-share-ca-certificates-然后执行update-ca-certificates更新证书缓存" class="headerlink" title="将CA-certificate.crt复制到&#x2F;usr&#x2F;local&#x2F;share&#x2F;ca-certificates; 然后执行update-ca-certificates更新证书缓存"></a>将CA-certificate.crt复制到&#x2F;usr&#x2F;local&#x2F;share&#x2F;ca-certificates; 然后执行update-ca-certificates更新证书缓存</h2><p>上面是我的配置示例</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hexo.zdu.us.kg/2024/11/25/nginx%E8%87%AA%E7%AD%BESSL%E8%AF%81%E4%B9%A6%E7%94%9F%E6%88%90%E5%92%8C%E9%85%8D%E7%BD%AE/" data-id="cm3x5yrk00002m7sb3wfhhers" data-title="nginx自签SSL证书生成和配置" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hexo操作记录" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/11/21/hexo%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/" class="article-date">
  <time class="dt-published" datetime="2024-11-21T07:40:31.000Z" itemprop="datePublished">2024-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/11/21/hexo%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/">hexo操作记录</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="hexo博客操作记录"><a href="#hexo博客操作记录" class="headerlink" title="hexo博客操作记录"></a>hexo博客操作记录</h2><h3 id="hexo-创建博文"><a href="#hexo-创建博文" class="headerlink" title="hexo 创建博文"></a>hexo 创建博文</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./node_modules/.bin/hexo new <span class="string">&quot;博文标题&quot;</span></span><br></pre></td></tr></table></figure>

<p>创建完成后会在source&#x2F;_posts&#x2F;生成一个”博文标题”.md文件，按需编辑此文件。</p>
<h3 id="hexo-生成"><a href="#hexo-生成" class="headerlink" title="hexo　生成"></a>hexo　生成</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./node_modules/.bin/hexo g</span><br></pre></td></tr></table></figure>

<h3 id="hexo-上传渲染好的文章到github"><a href="#hexo-上传渲染好的文章到github" class="headerlink" title="hexo 上传渲染好的文章到github"></a>hexo 上传渲染好的文章到github</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./node_modules/.bin/hexo deploy</span><br></pre></td></tr></table></figure>

<h3 id="hexo-启动本地简易server"><a href="#hexo-启动本地简易server" class="headerlink" title="hexo 启动本地简易server"></a>hexo 启动本地简易server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./node_modules/.bin/hexo server</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hexo.zdu.us.kg/2024/11/21/hexo%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/" data-id="cm3x5yrju0000m7sbe4w7g812" data-title="hexo操作记录" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/11/12/hello-world/" class="article-date">
  <time class="dt-published" datetime="2024-11-12T16:39:03.826Z" itemprop="datePublished">2024-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/11/12/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hexo.zdu.us.kg/2024/11/12/hello-world/" data-id="cm3eok7vn0000i4sb5fekdn1h" data-title="Hello World" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">January 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">December 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">November 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/01/09/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%A4%9A%E5%87%BA%E5%8F%A3%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1/">虚拟机多出口提供服务</a>
          </li>
        
          <li>
            <a href="/2025/01/07/cloudflare-workerd%E6%8A%8A%E7%8E%A9-%E7%BC%96%E8%AF%91workerd%EF%BC%88%E4%B8%80%EF%BC%89/">cloudflare workerd把玩-编译workerd（一）</a>
          </li>
        
          <li>
            <a href="/2025/01/07/freerdp%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA%E4%BA%92%E7%9B%B8%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E6%96%87%E4%BB%B6%E7%9A%84%E6%93%8D%E4%BD%9C/">freerdp连接远程主机互相复制粘贴文件的操作</a>
          </li>
        
          <li>
            <a href="/2024/12/18/Python-ctypes%E8%B0%83%E7%94%A8openssl%E5%8A%A8%E6%80%81C%E5%BA%93%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BE%8B%E5%AD%90/">Python ctypes调用openssl动态C库的一些例子</a>
          </li>
        
          <li>
            <a href="/2024/11/25/k8s%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%9C%A8Ubuntu%E4%B8%8B%E9%83%A8%E7%BD%B2/">k8s二进制在Ubuntu下部署</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 XiangYu Chen<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>